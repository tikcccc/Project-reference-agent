# 产品需求文档 (PRD) - Jarvis鹰眼 AI项目匹配系统

## 一、文档信息 (Cover & Meta)

| 字段 | 内容 |
| --- | --- |
| 项目名称 | Jarvis鹰眼 - AI项目匹配与招标分析系统 |
| 文档版本 | V1.0.5 |
| 版本历史 | 见修订记录 |
| 更新时间 | 2025-07-08 |
| 产品经理 | LWK建筑师事务所 |
| 参与人员 | 建筑师 / 项目经理 / 开发团队 / 业务分析师 |

## 二、修订记录

| 版本号 | 日期 | 内容描述 | 作者 | 状态 |
| --- | --- | --- | --- | --- |
| V1.0.0 | 2025-07-07 | 初稿PRD | 产品经理 | 草稿 |

## 三、背景与目标

### 3.1 业务背景

建筑设计行业在投标过程中面临着大量招标文件分析和项目经验匹配的挑战。传统的人工分析方式耗时长、效率低，且容易遗漏关键信息。LWK建筑师事务所拥有丰富的项目经验库，包括轨道交通导向开发(TOD)、住宅、商业等多种类型项目。

建筑师需要快速理解招标需求，从过往项目经验中找到最相关的案例，并生成专业的项目报告表单。当前缺乏一个智能化的个人工作助手工具来支撑这个核心业务流程。本系统设计为单用户使用，专注于个人工作效率提升。

**数据架构说明**：
- 表单数据存储在DWSS平台的数据库中，本应用不存储表单数据
- 项目知识库存储在DMS cloud平台上，管理员预先配置项目文件夹

### 3.2 问题陈述

1. **招标分析效率低**：人工阅读招标文件耗时，关键信息提取不全面
2. **项目匹配困难**：从大量历史项目中找到最匹配的案例需要丰富经验
3. **报告生成繁琐**：手动整理项目信息，格式不统一，容易出错
4. **知识管理分散**：项目经验缺乏结构化存储和智能检索能力

### 3.3 产品目标 & 成功指标

**核心目标：**
- 构建AI驱动的招标分析与项目匹配平台
- 实现从文件上传到报告生成的端到端智能工作流
- 建立结构化的项目经验知识库

**成功指标：**
- 招标分析时间从2-4小时缩短至30分钟以内
- 项目匹配准确率≥85%
- 报告生成效率提升70%
- 用户满意度≥90%

## 四、竞品 & 用户分析

### 4.1 用户画像

**目标用户：建筑师/项目经理**
- 角色：负责投标和项目匹配工作
- 经验：5-15年建筑设计经验
- 痛点：时间紧迫、信息量大、需要快速决策
- 使用场景：接到招标任务后的前期分析阶段
- 技术水平：熟悉基本办公软件，能够使用网页应用
- 工作环境：office办公室，使用台式机或笔记本电脑

### 4.2 竞品分析

目前市场上缺乏针对建筑行业的AI招标分析工具，主要竞争来自：
- **传统方式**：人工分析+Excel管理
- **通用AI工具**：ChatGPT等，但缺乏行业专业性
- **项目管理软件**：Aconex、BIM360等，主要focus施工阶段

**差异化优势：**
- 建筑行业专业AI训练
- 结构化项目经验库
- 端到端工作流设计

## 五、产品整体设计

### 5.1 产品定位

Jarvis鹰眼是专为建筑设计行业打造的AI招标分析与项目匹配个人工作助手，采用单用户架构设计，通过智能化工作流帮助建筑师快速分析招标需求、匹配历史项目经验、生成专业报告。

### 5.2 价值主张 (Value Proposition)

**对建筑师：**
- 大幅提升招标分析效率
- 降低遗漏关键信息的风险
- 获得结构化的项目洞察

**对事务所：**
- 提高投标成功率
- 积累和重用项目知识
- 标准化工作流程

### 5.3 用户流程/用户旅程

```
开始 → DWSS登录 → 获取Token → 文件上传 → AI分析 → 结果确认/编辑 → 一键生成表单 → 编辑完善 → 自动同步DWSS → 导出报告 → 结束
```

**详细流程：**
1. **用户认证阶段**：使用DWSS账户登录，获取API访问权限
2. **Token管理阶段**：系统自动获取并管理API访问token
3. **文件上传阶段**：选择招标文件，支持多种格式
4. **AI分析阶段**：自动提取关键信息，生成结构化分析结果
5. **结果确认阶段**：用户查看和编辑分析结果
6. **表单生成阶段**：AI自动匹配相关项目并直接生成报告表单
7. **编辑完善阶段**：用户修改和完善项目信息
8. **DWSS同步阶段**：表单保存后自动同步更新到DWSS平台
9. **导出阶段**：生成PDF/DOCX格式的最终报告

## 六、功能需求

### 6.1 用户故事点

### 用户认证与系统接入

1. **作为建筑师**，我需要使用DWSS账户登录系统，以便获取API访问权限
2. **作为用户**，我希望登录后能够自动获取DWSS API token，以便访问项目数据和表单服务

### 文件上传与分析

3. **作为建筑师**，我想要上传招标文件（PDF/DOCX/TXT等格式），以便AI可以分析文件内容
4. **作为用户**，我希望看到文件上传进度和支持的格式提示，以便确认操作状态
5. **作为建筑师**，我希望AI能自动提取招标标题、客户、预算、截止日期等关键信息，以便快速了解项目概况
6. **作为用户**，我希望能够编辑AI分析的结果，以便纠正可能的错误或补充信息

### 智能表单生成

7. **作为建筑师**，我希望AI能基于招标内容自动匹配最相关的历史项目并直接生成报告表单，以便快速制作提案
8. **作为用户**，我希望看到生成的表单包含匹配项目的详细信息（标题、地点、年份、类型等），以便了解选择依据

### 表单编辑与管理

9. **作为建筑师**，我希望系统能自动生成多个相关项目的报告表单，以便提供丰富的参考案例
10. **作为用户**，我希望能够批量编辑多个项目的表单信息，以便提高工作效率
11. **作为用户**，我希望能够自定义表单字段和内容，以便适应不同的报告需求
12. **作为用户**，我希望表单修改能够实时保存，以便避免数据丢失
13. **作为用户**，我希望表单保存后能自动同步更新到DWSS平台，以便保持数据一致性

### 导出与管理

14. **作为建筑师**，我希望能够通过DWSS API选择多个项目表单进行合并打印，以便生成统一的最终报告
15. **作为用户**，我希望导出功能能直接调用DWSS平台的表单系统，以便保持格式一致性
16. **作为用户**，我希望能够管理历史分析记录，以便重复使用或参考之前的工作
17. **作为用户**，我希望能够设置导出模板和格式，以便保持报告的一致性

### 系统集成

18. **作为用户**，我希望系统能够从DMS cloud平台读取预配置的项目知识库，以便获得最新的项目数据
19. **作为用户**，我希望系统具有良好的响应性能，以便流畅地完成工作流

### 6.2 需求清单 (功能列表)

| 功能ID | 模块 | 描述 | 目标 | 优先级 | 依赖 | 成功标准 |
| --- | --- | --- | --- | --- | --- | --- |
| **F-001** | 用户认证 | DWSS账户登录验证，获取API访问token | 确保系统安全访问 | 高 | DWSS认证服务 | 登录成功率≥99%，token有效期管理 |
| **F-002** | API集成 | 与DWSS系统API对接，实现数据交换 | 获取项目数据和表单服务 | 高 | DWSS API文档 | API调用成功率≥95% |
| **F-003** | 文件上传 | 支持多格式文件上传（PDF, DOCX, TXT, CSV, XLSX, MD, PPTX, HTML） | 提供招标文件输入能力 | 高 | 文件解析服务 | 支持格式上传成功率≥99% |
| **F-004** | AI分析引擎 | 基于LLM的招标文件智能分析，提取关键信息 | 自动化信息提取 | 高 | AI/LLM服务 | 关键信息提取准确率≥90% |
| **F-005** | 分析结果展示 | 卡片式展示分析结果（标题、客户、预算、截止日期、摘要、详情） | 结构化展示分析结果 | 高 | 前端UI组件 | 信息展示完整且美观 |
| **F-006** | 结果编辑功能 | 支持用户编辑AI分析的结果内容 | 允许人工校正和完善 | 高 | 文本编辑组件 | 编辑内容实时保存 |
| **F-007** | DMS cloud集成 | 从DMS cloud平台读取预配置的项目知识库 | 获取最新项目数据进行匹配 | 高 | DMS cloud API | 项目数据实时同步且完整 |
| **F-008** | 智能表单生成 | 基于招标内容自动匹配相关项目并直接生成报告表单 | 一键生成完整报告框架 | 高 | AI匹配算法+表单模板引擎 | 匹配相关性≥85%，表单完整度≥95% |
| **F-009** | 多表单管理 | 支持同时编辑多个自动生成的项目表单 | 提高批量编辑效率 | 高 | 状态管理 | 支持在表单间快速切换 |
| **F-010** | 表单编辑器 | 提供富文本编辑功能，支持字段修改 | 允许自定义表单内容 | 高 | 编辑器组件 | 编辑体验流畅且功能完整 |
| **F-011** | 实时保存 | 表单修改自动保存到本地存储 | 防止数据丢失 | 高 | 本地存储API | 数据保存成功率100% |
| **F-012** | DWSS同步 | 表单保存后通过API自动同步更新到DWSS平台 | 保持数据一致性，实现双向集成 | 高 | DWSS API + 数据映射 | 同步成功率≥98%，同步延迟≤3秒 |
| **F-013** | DWSS API导出 | 通过DWSS表单系统API进行合并表单打印和导出，支持URL合并处理 | 生成统一格式的最终交付物 | 高 | DWSS API集成 + URL合并处理模块 | 支持多表单合并，支持多URL合并成单一文档，导出格式与DWSS一致 |
| **F-014** | 历史记录管理 | 本地缓存和管理分析历史，支持快速访问 | 提供工作连续性和离线能力 | 中 | 本地存储 | 历史记录可准确恢复，缓存数据安全 |
| **F-015** | 新建分析 | 支持开始新的分析任务 | 支持多任务处理 | 中 | 状态重置逻辑 | 新任务状态独立且干净 |
| **F-016** | 响应式设计 | 适配不同屏幕尺寸的设备 | 提供良好的用户体验 | 中 | CSS响应式框架 | 在主流设备上显示正常 |
| **F-017** | 错误处理 | 优雅处理文件上传失败、分析错误等异常 | 提升系统稳定性 | 高 | 异常处理机制 | 用户能理解错误并知道解决方案 |
| **F-018** | 加载状态 | 显示文件上传、AI分析等操作的进度 | 提供操作反馈 | 中 | 进度指示器 | 用户能清楚了解操作状态 |
| **F-019** | 数据验证 | 验证上传文件格式和大小限制 | 确保系统安全性 | 高 | 文件验证逻辑 | 无效文件被正确拦截 |
| **F-020** | URL合并处理 | 处理DWSS API返回的多条URL，自动下载并合并成统一文档 | 支持批量导出的后端处理能力 | 高 | 文档处理库(PDF-lib, docx) + 异步任务队列 | URL下载成功率≥95%，合并处理时间≤60秒，支持PDF和DOCX格式 |

## 七、详细需求说明

### F-001 DWSS用户认证

**原型图**：登录界面，包含用户名/密码输入框和登录按钮
**交互规则**：
- 用户首次访问系统时必须进行DWSS登录
- 登录成功后获取API访问token并存储
- Token过期时自动提示重新登录
- 支持记住登录状态（可选）
**参数校验**：
- 用户名：不能为空，符合DWSS账户格式
- 密码：不能为空，满足密码复杂度要求
**异常处理**：
- 登录失败时显示具体错误信息
- 网络异常时提供重试机制
- Token过期时自动跳转到登录页面
**成功标准**：
- 登录成功率≥99%
- Token获取成功后可正常调用DWSS API
- 登录状态持久化存储

### F-002 DWSS API集成

**原型图**：后台API调用，无直接用户界面
**交互规则**：
- 所有DWSS相关操作都需要有效token
- API调用失败时自动重试（最多3次）
- 支持获取项目数据、表单信息等
**参数校验**：
- Token有效性验证
- API请求参数格式验证
**异常处理**：
- API调用失败时记录错误日志
- Token过期时自动刷新或重新登录
- 网络异常时使用缓存数据（如有）
**成功标准**：
- API调用成功率≥95%
- 响应时间≤3秒
- 错误处理机制完善

### F-003 多格式文件上传

**原型图**：集中式上传界面，支持拖拽和点击选择
**交互规则**：
- 支持单文件和多文件上传
- 实时显示已选择的文件名称
- 上传成功后启用"生成分析报告"按钮
**参数校验**：
- 文件大小：≤50MB
- 支持格式：PDF, DOCX, TXT, CSV, XLSX, MD, PPTX, HTML
**异常处理**：
- 不支持格式时显示友好错误提示
- 文件过大时提供压缩建议
**成功标准**：
- 支持格式上传成功率≥99%
- 文件选择后立即显示反馈

### F-002 AI招标分析引擎

**原型图**：加载动画 + 分析结果卡片展示
**交互规则**：
- 点击"生成分析报告"后显示加载状态
- 分析完成后自动跳转到结果页面
- 支持分析结果的二次编辑
**参数校验**：
- 确保文件内容可解析
- 验证提取信息的完整性
**异常处理**：
- 文件无法解析时提供人工分析选项
- AI服务异常时显示重试机制
**成功标准**：
- 关键信息提取准确率≥90%
- 分析时间≤60秒

### F-008 智能表单生成

**原型图**：AI分析页面的"一键生成项目报告表单"按钮，点击后直接跳转到多表单编辑界面
**交互规则**：
- 基于AI分析结果自动匹配相关项目（无需用户手动选择）
- AI自动选择4-6个最相关的历史项目
- 一键生成后自动跳转到表单编辑页面
- 左侧显示生成的项目列表，右侧显示当前编辑的表单详情
- 提供编辑/只读模式切换
**参数校验**：
- 招标分析结果完整性验证
- 匹配项目数量控制（4-6个）
- 必填字段验证
**异常处理**：
- 匹配失败时使用默认项目模板
- 数据保存失败时本地缓存
- 表单生成失败时提供重新生成选项
**成功标准**：
- 项目匹配相关性≥85%
- 表单字段完整度≥95%
- 生成时间≤15秒
- 自动生成4-6个相关项目表单

### F-012 DWSS同步

**原型图**：表单编辑界面中的保存按钮，保存后显示同步状态指示器
**交互规则**：
- 表单保存成功后自动触发DWSS同步
- 显示同步进度和状态（同步中/成功/失败）
- 同步失败时提供重试选项
- 支持批量保存时的批量同步
- 同步成功后显示DWSS中对应表单的ID或链接
**参数校验**：
- 验证DWSS API token有效性
- 检查表单数据完整性和格式
- 验证必填字段是否已填写
**异常处理**：
- 网络异常时本地缓存待同步数据
- API调用失败时记录错误日志并提示用户
- Token过期时自动刷新后重试
- 同步超时时提供手动重试选项
**成功标准**：
- 同步成功率≥98%
- 同步延迟≤3秒
- 同步失败时用户能清楚了解失败原因
- 支持离线编辑，联网后自动同步

### F-013 DWSS API导出

**原型图**：表单编辑页面的"导出项目"按钮，点击后显示导出选项和进度
**交互规则**：
- 支持选择多个已同步的项目表单进行合并导出
- 调用DWSS表单系统的打印API，API返回多条URL地址
- 自动调用后端URL合并处理服务（F-020）
- 显示导出进度和状态指示器（包括URL下载和合并进度）
- 导出完成后提供下载链接或直接下载
- 支持不同的导出格式（PDF、DOCX等，根据DWSS API支持的格式）
**参数校验**：
- 验证所选表单是否已成功同步到DWSS
- 检查DWSS API的访问权限和token有效性
- 验证导出格式的有效性
- 验证URL合并处理模块的可用性
**异常处理**：
- 表单未同步时提示先完成同步
- DWSS API调用失败时显示错误信息并提供重试
- URL下载失败时自动重试（最多3次）
- 文档合并失败时提供错误详情和重试选项
- 导出超时时提供取消和重试选项
- 网络异常时缓存导出请求，恢复后自动重试
**成功标准**：
- 支持多表单合并导出
- 支持DWSS API返回的多URL自动合并处理
- 导出格式与DWSS系统完全一致
- 导出成功率≥95%
- 包含URL合并处理的总导出时间≤90秒（取决于表单数量和URL数量）
- 导出文件可以在DWSS系统中正常使用

### F-020 URL合并处理

**原型图**：后台处理服务，无直接用户界面，通过API调用
**交互规则**：
- 接收DWSS API返回的多条URL列表
- 并行下载各URL对应的文档内容
- 根据指定格式（PDF/DOCX）进行文档合并
- 生成临时下载链接供前端使用
- 提供异步任务状态查询接口
- 支持任务进度实时更新
**参数校验**：
- URL有效性验证（格式、可访问性）
- 文档格式兼容性检查
- 文件大小限制验证（单个文件≤10MB，总计≤100MB）
- 合并参数有效性验证
**异常处理**：
- URL无法访问时记录错误并跳过该文档
- 文档格式不支持时提供格式转换或错误提示
- 下载超时时自动重试（最多3次）
- 内存不足时采用流式处理方式
- 合并失败时保留已处理的部分内容
**技术实现**：
- 使用异步任务队列处理长时间任务
- 支持PDF合并（pdf-lib库）和DOCX合并（docx库）
- 实现文档流式下载和处理
- 提供任务进度回调机制
- 临时文件自动清理机制
**成功标准**：
- URL下载成功率≥95%
- 文档合并处理时间≤60秒（10个文档以内）
- 支持PDF和DOCX两种格式的合并
- 合并后文档保持原有格式和排版
- 任务状态更新延迟≤2秒
- 临时文件在24小时后自动清理

## 八、非功能需求 (NFR)

| 类型 | 要求描述 | 测试标准 |
| --- | --- | --- |
| 性能 | 文件上传响应时间≤5s，AI分析时间≤60s，页面切换≤1s | 性能测试 + 用户体验测试 |
| 兼容性 | 支持Chrome、Safari、Edge、Firefox主流浏览器 | 浏览器兼容性测试 |
| 可用性 | 单个完整工作流操作步骤≤9步，一键从分析到表单生成，自动同步DWSS | 可用性测试 + 用户反馈 |
| 可扩展性 | 支持项目数据库扩展到1000+项目，单用户系统 | 数据库性能测试 |
| 安全性 | DWSS登录认证，上传文件临时存储，不保存敏感商业信息 | 安全审计 + 数据保护评估 |
| 可维护性 | 代码结构清晰，模块化设计，支持功能快速迭代 | 代码审查 + 架构评估 |

## 九、迭代与上线计划

| 迭代 | 周期 | 功能包 | 验证点 |
| --- | --- | --- | --- |
| MVP v1.0 | 2025-07 | DWSS认证+API集成+基础上传+AI分析+表单生成+DWSS同步 | 核心流程可用，DWSS双向集成成功，内部测试通过 |
| v1.1 | 2025-08 | 编辑功能增强+导出优化+错误处理+同步状态管理 | 用户体验提升，稳定性改进，同步机制完善 |
| v1.2 | 2025-09 | 历史记录管理+项目数据管理+离线同步+响应式优化 | 完整功能闭环，支持离线工作，支持生产使用 |
| v2.0 | 2025-Q4 | AI能力增强+个性化推荐+DWSS深度集成+批量同步优化 | 智能化水平提升，企业级数据管理能力 |

## 十、运营 & 风险评估

**主要风险点：**
- **技术风险**：AI分析准确率不达预期，影响用户信任
- **数据风险**：项目数据库不够丰富，影响匹配效果
- **用户风险**：建筑师对AI工具接受度存在不确定性
- **竞争风险**：大型软件厂商可能推出类似功能

**应对策略：**
- 建立人工校验机制，持续优化AI模型
- 与业务部门合作，持续丰富项目数据库
- 提供详细的用户培训和支持文档
- 专注建筑行业深度定制，建立技术壁垒

**运营计划：**
- **内测阶段**：选择5-10位资深建筑师进行深度测试
- **试运行**：在真实项目中验证系统效果
- **推广阶段**：基于成功案例推广到全公司使用

## 十一、附录 & 支持材料

### 技术架构说明
- **系统架构**：单用户桌面应用，无需多用户管理和权限控制
- **前端**：单页面HTML应用，使用原生JavaScript
- **认证系统**：DWSS单点登录，token管理
- **AI服务**：集成OpenAI/Claude等LLM服务
- **数据存储架构**：
  - 表单数据：存储在DWSS平台数据库（本应用不存储）
  - 项目知识库：存储在DMS cloud平台（管理员预配置）
  - 本地缓存：仅缓存分析历史和会话数据
- **文件处理**：支持多格式文档解析
- **外部集成**：DWSS API、百数API、DMS cloud API

### 项目数据结构
```javascript
{
  id: Number,
  title: String,
  type: String, // TOD/RESIDENTIAL/COMMERCIAL
  year: String,
  country: String,
  city: String,
  developer: String,
  gfa: String,
  siteArea: String,
  involvement: String,
  description: String,
  img: String
}
```

### 关键术语定义
- **TOD**：Transit-Oriented Development，轨道交通导向开发
- **GFA**：Gross Floor Area，建筑面积
- **DWSS**：Digital Works Supervision System，数字化工程监管系统
- **DWSS表单系统**：DWSS平台使用的表单系统，提供表单创建、编辑、打印和导出功能
- **DMS cloud**：Document Management System cloud，云端文档管理平台，存储项目知识库
- **AI分析**：基于自然语言处理的文档智能分析
- **项目匹配**：基于内容相似度的智能推荐算法
- **合并打印**：通过DWSS API将多个表单合并成一个统一的文档进行导出
- **URL合并处理**：后端服务功能，自动下载DWSS API返回的多条URL对应的文档内容，并合并成单一PDF或DOCX文件
- **知识库**：存储在DMS cloud上的预配置项目文件夹，由管理员维护
- **异步任务队列**：处理长时间运行任务（如URL下载和文档合并）的后台服务机制

### API接口设计
**认证相关：**
- `POST /api/auth/login` - DWSS用户登录
- `POST /api/auth/refresh` - 刷新token
- `POST /api/auth/logout` - 用户登出

**核心业务：**
- `POST /api/upload` - 文件上传
- `POST /api/analyze` - AI分析
- `POST /api/match` - 项目匹配

**DWSS集成：**
- `GET /api/dwss/projects` - 获取DWSS项目数据
- `GET /api/dwss/forms` - 获取DWSS表单信息
- `POST /api/dwss/forms` - 创建新的DWSS表单
- `PUT /api/dwss/forms/:id` - 更新DWSS表单数据
- `POST /api/dwss/sync` - 批量同步表单数据到DWSS
- `GET /api/dwss/sync/status/:id` - 查询同步状态

**DWSS表单API集成：**
- `POST /api/dwss/export` - 通过DWSS API合并导出表单
- `GET /api/dwss/templates` - 获取可用的导出模板
- `POST /api/dwss/print` - 调用DWSS打印服务
- `GET /api/dwss/export/status/:id` - 查询导出任务状态

**URL合并处理API：**
- `POST /api/merge/batch-export` - 批量导出并合并URL文档
- `POST /api/merge/process-urls` - 处理URL列表并合并文档
- `GET /api/merge/task/:taskId` - 查询URL合并任务状态
- `GET /api/merge/download/:taskId` - 下载合并后的文档
- `DELETE /api/merge/cleanup/:taskId` - 清理临时文件

**DMS cloud集成：**
- `GET /api/dms/projects` - 从DMS cloud获取项目知识库
- `GET /api/dms/folders` - 获取预配置的项目文件夹列表
- `GET /api/dms/project/:id` - 获取特定项目的详细信息
- `GET /api/dms/search` - 在DMS cloud中搜索项目

---

*本PRD基于Jarvis鹰眼原型系统分析制作，旨在指导产品开发和优化工作。*